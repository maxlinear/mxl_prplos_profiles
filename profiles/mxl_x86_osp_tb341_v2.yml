---
profiles:
  - PRPL_OSP_TB341_v2
target: intel_x86
subtarget: lgm
external_target: True
description: Build images for the Maxlinear x86 devices - OSP TB341 v2
             This target requires sources from MaxLinear, that are accessible via
             git.maxlinear.com.
             For reference boards, source code access and reporting issues,
             please check https://gitlab.com/prpl-foundation/prplos/prplos/-/wikis/MaxLinear-Open-Service-Platform
feeds:
  - name: intel_x86
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_target_x86.git
    tracking_branch:  updk_9.1.80
    revision: 6cfae311b9c3a96018fd2aa5aac73aac1f68bbf4
  - name: rootfs
    uri: ssh://git@git.maxlinear.com/ugw-oss/rootfs.git
    tracking_branch:  updk_9.1.80
    revision: 3768ee6f1dd4c0c1cc5f4bda48a6033105f7148f
  - name: 3rdparty
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_3rdparty.git
    tracking_branch:  updk_9.1.80
    revision: 847d6bdb85d52c896cd191b4b797021a12dcbdb6
  - name: datapath
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_datapath.git
    tracking_branch:  updk_9.1.80
    revision: 2afad648965c87b2c2ea2fda2037284c2c659192
  - name: gphy_firmware
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_gphy_firmware.git
    tracking_branch:  updk_9.1.80
    revision: c34578e7345f6597e7b3f4170835ba01da9bc689
  - name: gwdpa_dpm
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_gwdpa-dpm.git
    tracking_branch:  updk_9.1.80
    revision: 7d4c0f2ec3e11fda723c6d4a389a1f9a8ffacd0d
  - name: misc
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_common.git
    tracking_branch:  updk_9.1.80
    revision: 9bf4d29dca9e0dc70a891db2967f681377edb7b1
  - name: opensource_apps_prpl
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_opensource_apps_prpl.git
    tracking_branch:  updk_9.1.80
    revision: 54324f73aca4fd714a7a12f316c1e337d04c6a22
  - name: packet_learn
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_packet_learn.git
    tracking_branch:  updk_9.1.80
    revision: 039a5f37b4eaf8d8f575633a34f777053b62c8f1
  - name: pon
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_pon.git
    tracking_branch:  updk_9.1.80
    revision: c90b7792b70ca8e8bef7081b99b528961eab8315
  - name: ppa
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_ppa.git
    tracking_branch:  updk_9.1.80
    revision: d70dc514a74c12225ef9fbcf1e8583809d90f727
  - name: pp_net_adapter
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_pp_net_adapter.git
    tracking_branch:  updk_9.1.80
    revision: ea801c4be7626579edc46736c0be0d0786ddf277
  - name: vpn_fw
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_vpn_fw.git
    tracking_branch:  updk_9.1.80
    revision: 3a1cec6f7bc4edeb88dc49e4cc25e4aafa56438f
  - name: qos
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_qos_tc.git
    tracking_branch:  updk_9.1.80
    revision: 6ad674b066baee4346608f0e58c0eb76f8df91ef
  - name: utils
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_ugw_utils.git
    tracking_branch:  updk_9.1.80
    revision: 0737ccdcbf0bceabbd516185ddfa9ebb8f3be061
  - name: bootloader
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_uboot.git
    tracking_branch:  u-boot-2022.01_prpl_4.0.254
    revision: 7d50fe6999f10ca8d82a71654d92225bf45b91a7
  - name: dpl
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_dpl.git
    tracking_branch:  updk_9.1.80
    revision: 3062ecaffbf451155bcdd75482fc47e7bff37801
  - name: speedtest
    uri: ssh://git@git.maxlinear.com/mxl-oss/speedtest.git
    tracking_branch:  updk_9.1.80
    revision: 64134928eb12dc99b2db30e591b16247da512505
  - name: ugw_sdk
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_ugw_sdk.git
    tracking_branch:  updk_9.1.80
    revision: 1945daa608d13b5b50315746f18a6f8ed46a2cfd
  - name: system_service
    uri: ssh://git@git.maxlinear.com/ugw-oss/feeds/feed_system_service.git
    tracking_branch:  updk_9.1.60
    revision: 1f2768747375c39dc9858687ea853708e72508dd

additional_packages:
  - feed: packages
    packages:
      - openvswitch
      - strongswan
      - vsftpd
      - usbutils
      - pciutils
#     - modemmanager

packages:
  - kmod-mxl_eth_drv
  - kmod-gwdpa-dpm
  - kmod-pp_net_adapter
  - kmod-packet_learn
  - blockd
  - kmod-phy-lgm-usb
  - kmod-usb-acm
  - kmod-usb-dwc3-intel
  - kmod-usb-net-cdc-mbim
  - kmod-usb-printer
  - kmod-usb-storage-uas
  - kmod-usb-xhci-hcd
  - kmod-usb3
  - ppv4-firmware-lgm
  - kmod-intel_ppv4_fw_lgm
  - kmod-intel-extmark-x86
  - kmod-ppv4
  - kmod-p34x_phy_fwdl
  - mxl-gphy-fw-lgm
  #- netifd-ugw
  - e2fsprogs
  - kmod-directconnect-dp
  - kmod-ppa-drv
  - kmod-ppa-drv-accel
  - kmod-ppa-drv-gre
  - kmod-ppa-drv-lgm
  - kmod-ppa-drv-stack-al
  - ppacmd
  - kmod-mxl_vpn
  - kmod-mxl_lgm_toe
  - kmod-ipsec4
  - kmod-ipsec6
  - kmod-ipsec
  - kmod-mhi-bus
  - kmod-mhi-pci-generic
  - kmod-mhi-net
  - kmod-wwan
  - kmod-mhi-wwan-ctrl
  - kmod-mhi-wwan-mbim
  - eip197-firmware
  - kmod-safexcel
  - vpn-firmware-lgm
  - kmod-ipsec4-offload
  - kmod-ipsec6-offload
  - pon-libnl
  - gpon-omci-onu-binary
  - pon-mcc-lib
  - pon-lib
  - pon-net-lib
  - pon-img-lib
  - pon-tools
  - base-files-platform-lgm
  - pon-base-files
  - pon-base-files-debug
  - pon-base-files-prpl
  - pon-lib-cli
  - pon-lib-daemon
  - ponmbox-cli
  - pon-gpon-firmware-urx-b
  - pon-xpon-firmware-urx-b
  - pon-serdes-firmware-urx-b
  - kmod-pon-mbox-drv-eth
  - kmod-dp-eth-reinsert
  - kmod-pon-mcc-drv
  - kmod-pon-mcc-drv-filter
  - kmod-mxl_pon_hgu_vuni_lgm
  - kmod-ebt-prio
  - ethtool
  - base-files-prpl
  - ppmd-bin
  - pm-util
  - kmod-intel-qos
  - kmod-qos-tc
  - partx-utils
  - obudpst
  - speedtest-modules
  - kmod-dpl
  - kmod-gpio-button-hotplug
  - kmod-mxl_gpy
  - libugwhelper
  - libmsgapi
  - sse_fapi_lgm
  - sse_fapi_lgm-sse_test_app
  #- secure-utils
  - fwupgrade
  - xl2tpd-prpl

diffconfig: |
  CONFIG_DEVEL=y
  CONFIG_EXTRA_OPTIMIZATION="-fno-caller-saves -fno-plt -Wno-error=deprecated-declarations -Wno-error=address"
  CONFIG_KERNEL_GIT_CLONE_URI="git@git.maxlinear.com:mxl-oss/linux.git"
  CONFIG_KERNEL_GIT_REF="UPDK_9.1.80"
  CONFIG_GPON_OMCI_ONU_UBUS_INTERFACE=y
  CONFIG_TARGET_MULTI_PROFILE=y
  CONFIG_TARGET_PER_DEVICE_ROOTFS=y
  CONFIG_TARGET_DEVICE_intel_x86_lgm_DEVICE_PRPL_OSP_TB341_v2=y
  # CONFIG_TARGET_ROOTFS_EXT4FS is not set
  CONFIG_BUILD_LOG=y
  CONFIG_PACKAGE_uboot-octopus-urx641-p34x-phy-emmc-prpl=y
  CONFIG_VERSION_FILENAMES=n
  CONFIG_VERSION_CODE_FILENAMES=n
  # CONFIG_PACKAGE_bios_images is not set
  CONFIG_BUILD_SDK="prplos"
  CONFIG_INTEL_X86_IMAGE_FORMAT_FIT=y
  CONFIG_INTEL_X86_IMAGE_FORMAT_MKIMAGE=y
  CONFIG_BUSYBOX_CUSTOM=y
  CONFIG_BUSYBOX_CONFIG_TFTPD=y
  CONFIG_BUSYBOX_CONFIG_FEATURE_TFTP_GET=y
  CONFIG_BUSYBOX_CONFIG_FEATURE_TFTP_PUT=y
  CONFIG_BUSYBOX_CONFIG_TFTP=y
  CONFIG_LGM_EIP123_SUPPORT=y
  CONFIG_PACKAGE_strongswan-charon=y
  CONFIG_PACKAGE_strongswan-default=y
  CONFIG_PACKAGE_strongswan-ipsec=y
  CONFIG_PACKAGE_strongswan-mod-aes=y
  CONFIG_PACKAGE_strongswan-mod-attr=y
  CONFIG_PACKAGE_strongswan-mod-connmark=y
  CONFIG_PACKAGE_strongswan-mod-constraints=y
  CONFIG_PACKAGE_strongswan-mod-des=y
  CONFIG_PACKAGE_strongswan-mod-dnskey=y
  CONFIG_PACKAGE_strongswan-mod-fips-prf=y
  CONFIG_PACKAGE_strongswan-mod-gmp=y
  CONFIG_PACKAGE_strongswan-mod-hmac=y
  CONFIG_PACKAGE_strongswan-mod-kdf=y
  CONFIG_PACKAGE_strongswan-mod-kernel-netlink=y
  CONFIG_PACKAGE_strongswan-mod-md5=y
  CONFIG_PACKAGE_strongswan-mod-mgf1=y
  CONFIG_PACKAGE_strongswan-mod-nonce=y
  CONFIG_PACKAGE_strongswan-mod-pem=y
  CONFIG_PACKAGE_strongswan-mod-pgp=y
  CONFIG_PACKAGE_strongswan-mod-pkcs1=y
  CONFIG_PACKAGE_strongswan-mod-pubkey=y
  CONFIG_PACKAGE_strongswan-mod-random=y
  CONFIG_PACKAGE_strongswan-mod-rc2=y
  CONFIG_PACKAGE_strongswan-mod-resolve=y
  CONFIG_PACKAGE_strongswan-mod-revocation=y
  CONFIG_PACKAGE_strongswan-mod-sha1=y
  CONFIG_PACKAGE_strongswan-mod-sha2=y
  CONFIG_PACKAGE_strongswan-mod-socket-default=y
  CONFIG_PACKAGE_strongswan-mod-sshkey=y
  CONFIG_PACKAGE_strongswan-mod-stroke=y
  CONFIG_PACKAGE_strongswan-mod-updown=y
  CONFIG_PACKAGE_strongswan-mod-vici=y
  CONFIG_PACKAGE_strongswan-mod-x509=y
  CONFIG_PACKAGE_strongswan-mod-xauth-generic=y
  CONFIG_PACKAGE_strongswan-mod-xcbc=y
  CONFIG_PACKAGE_strongswan-swanctl=y
  CONFIG_KERNEL_FTRACE=y
